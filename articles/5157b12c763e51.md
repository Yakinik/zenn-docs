---
title: "ChatGPTã«æ—¥ã€…ã®ã‚ã‚“ã©ãã•ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’ã‚„ã£ã¦ã‚‚ã‚‰ãŠã†: å¿œç”¨ç·¨"
emoji: "ğŸ˜„"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["å¿œç”¨", "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ", "ChatGPT"]
published: true
---

- [ChatGPTã¨ã®å¯¾è©±ç·¨](https://zenn.dev/yakinik/articles/f9246f25442149)

# ã€ŒChatGPTã¨ã®å¯¾è©±ç·¨ã€ã‹ã‚‰ã®ãŠã•ã‚‰ã„

- ChatGPTã¯åˆ¶é™ã‚’ä¸ãˆãšè³ªå•ã‚’ã™ã‚‹ã¨å‹æ‰‹ã«ã„ã‚ã„ã‚è§£é‡ˆã—ã¦è‡ªç”±ã«å›ç­”ã™ã‚‹ã€‚
- å›ç­”ç²¾åº¦ã‚’ä¸Šã’ã‚‹ã«ã¯è¦ä»¶ã‚’ã¾ã¨ã‚ã¦ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è½ã¨ã™å¿…è¦ãŒã‚ã‚‹ã€‚
- è¦ä»¶ã‚’å¢—ã‚„ã—ã™ãã‚‹ã¨å–ã‚Šã“ã¼ã™ãŸã‚ã€å†ç”Ÿæˆã‚„è¿½åŠ ã®æŒ‡æ‘˜ãŒå¿…è¦ã«ãªã‚‹å ´åˆãŒã‚ã‚‹ã€‚

# å¿œç”¨ã™ã‚‹ã«ã¯

å¿œç”¨ã—ã¦ã„ãã«ã¯ã€ã‚„ã‚ŠãŸã„ã“ã¨ãŒãã£ã¡ã‚Šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è½ã¨ã›ã¦ã„ã‚‹ã‹ãŒè‚ã«ãªã‚‹ã€‚
ã‚„ã‚ŠãŸã„ã“ã¨ã«å¿œã˜ã¦ã©ã®ã‚ˆã†ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã¾ã¨ã‚ã‚‹ã¹ãã‹ã®ä¾‹ã‚’ã„ãã¤ã‹è¨˜è¼‰ã™ã‚‹ã€‚
(ä»¥é™ã¯è¿½è¨˜ã§ãæ¬¡ç¬¬å¢—ã‚„ã—ã¦ã„ã)

# å¿œç”¨ä¾‹

## ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆã‚’å…ƒã«ã—ã¦æ§‹é€ åŒ–ã•ã‚ŒãŸJSONã‚’ç”Ÿæˆã—ãŸã„

### è¦æ±‚

ã–ã£ãã‚Šä»¥ä¸‹ã®ã‚ˆã†ãªäº‹ã‚’æ€ã„ã¤ã„ãŸã‚‚ã®ã¨ã™ã‚‹ã€‚

> ã‚ã€œã€å¹´ä»£åˆ¥ã«ã‚·ãƒ¼ãƒˆãŒåˆ†ã‹ã‚ŒãŸæ¥½æ›²ãƒªã‚¹ãƒˆã®Excelã‹ã‚‰ã€å¹´ä»£ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåˆ†ã‘ã—ãŸã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã”ã¨ã®æ›²æƒ…å ±JSONã‚’ä½œã‚ŠãŸã„ãªãƒ¼ã€‚

### è¦ä»¶

è¦æ±‚ã‹ã‚‰è¦ä»¶ã«åˆ†è§£ã—ã¦ã„ãã€‚

#### Excelãƒ‡ãƒ¼ã‚¿æ§‹é€ 

Excelã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¯ä»¥ä¸‹ã‚’ä¾‹ã¨ã—ã¦ã€è¤‡æ•°ã‚·ãƒ¼ãƒˆãƒ»è¤‡æ•°è¡Œå­˜åœ¨ã™ã‚‹ã€‚

**ã‚·ãƒ¼ãƒˆ: 1990**

|ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå|æ›²å|ãƒªãƒªãƒ¼ã‚¹æ—¥|BPM|
|:--|:--|:--|:--|
|çŠ¬|é å ãˆA|19940401|80|
|çŠ¬|é å ãˆB|19991215|60|
|çŒ«|ã‚¢ã‚ªã‚¢ã‚ª|19900833|120|

**ã‚·ãƒ¼ãƒˆ: 2000**

|ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå|æ›²å|ãƒªãƒªãƒ¼ã‚¹æ—¥|BPM|
|:--|:--|:--|:--|
|çŠ¬|é å ãˆC|20040401|80|
|çŒ«|ãƒãƒ¼ãƒƒ|20010101|10|
|çŒ«|ãƒŸã‚›ãƒƒ|20091230|280|
|é´¨|ãƒ”ãƒ«ãƒ”ãƒ«|20061112|145|

#### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã«æ›¸ãå‡ºã—ãŸã„ã€‚

```md: ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 
â”œ 1990 â”¬ çŠ¬.json
â”œ      â”” çŒ«.json
â”” 2000 â”¬ çŠ¬.json
       â”œ çŒ«.json
       â”” é´¨.json
```

ã“ã®æ§‹é€ ã«åŠ ãˆã€ã‚·ãƒ¼ãƒˆãŒè¤‡æ•°å­˜åœ¨ã™ã‚‹ã“ã¨ã‚’æ˜ç¤ºã™ã‚‹ã€‚

```markdown: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- "å¹´ä»£" ã‚·ãƒ¼ãƒˆã¯è¤‡æ•°å­˜åœ¨ã™ã‚‹
``` 

#### JSONãƒ‡ãƒ¼ã‚¿æ§‹é€ 

ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®JSONã«æ›¸ãå‡ºã—ãŸã„ã€‚

```json: 1990/çŠ¬.json
{
  "period": "1990",
  "artist": "çŠ¬",
  "trackList": [
    { "name": "é å ãˆA", "date": "19940401", "bpm": "80" },
    { "name": "é å ãˆB", "date": "19991215", "bpm": "60" }
  ]
}
```

```json: 2000/é´¨.json
{
  "period": "2000",
  "artist": "é´¨",
  "trackList": [
    { "name": "ãƒ”ãƒ«ãƒ”ãƒ«", "date": "20061112", "bpm": "145" }
  ]
}
```

ã“ã®æ§‹é€ ã«åŠ ãˆã€æ§‹é€ åŒ–ã™ã‚‹ãŸã‚ã®æ¦‚å¿µã‚’æ˜ç¤ºã™ã‚‹ã€‚

```markdown: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- "trackList" ã«ã¯ "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå" ãŒä¸€è‡´ã™ã‚‹æƒ…å ±ã‚’ã¾ã¨ã‚ã‚‹
``` 

#### ç´°ã‹ã„è¦ä»¶

- (JSFiddleã«æ¸¡ã›ã¦æ‰‹ã£å–ã‚Šæ—©ã„ã®ã§)
HTML/JSã§ã€HTMLãƒ•ã‚¡ã‚¤ãƒ«ä¸€ã¤ã§æ¸ˆã¾ã›ãŸã„ã€‚
- formã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ãŸã„ã€‚
- å¤‰æ›å¾Œã®æ§‹é€ ã‚’Zipã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„ã€‚

### è¦ä»¶ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è½ã¨ã—è¾¼ã‚€

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è½ã¨ã—è¾¼ã‚€ã«ã¯ã€ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¨è¦ä»¶ã‚’æŠ½è±¡åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

#### Excelãƒ‡ãƒ¼ã‚¿æ§‹é€ 

Excelãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¾ã§ãã‚‹

```md: Excelãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- "å¹´ä»£" ã‚·ãƒ¼ãƒˆ
  - "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå" åˆ—
  - "æ›²å" åˆ—
  - "ãƒªãƒªãƒ¼ã‚¹æ—¥" åˆ—
  - "BPM" åˆ—
```

#### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã«ã¤ã„ã¦ã¯Excelãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®ã‚·ãƒ¼ãƒˆåãƒ»åˆ—åã¨ç´ä»˜ã‘ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¾ã§ãã‚‹ã€‚

```json: ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 
{å¹´ä»£}/{ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå}.json
``` 

#### JSONãƒ‡ãƒ¼ã‚¿æ§‹é€ 

JSONãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¯ã€å‰é …ã®Excelãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®åˆ—åã¨ç´ä»˜ã‘ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¾ã§ãã‚‹ã€‚

```json: JSONãƒ‡ãƒ¼ã‚¿æ§‹é€ 
{
  "period": "å¹´ä»£",
  "artist": "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå",
  "trackList": [
    { "name": "æ›²å", "date": "ãƒªãƒªãƒ¼ã‚¹æ—¥", "bpm": "BPM" }
  ]
}
```

#### ç´°ã‹ã„è¦ä»¶

ãã‚Œãã‚Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå‘ã‘ã®æ–‡è¨€ã«ç›´ã™ã€‚

```md: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- HTML/JSã‚’åˆ©ç”¨ã™ã‚‹
- index.htmlå†…ã«å¤‰æ›å‡¦ç†ã‚’æŒã¤
- HTMLå…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ãŒã»ã—ã„
- formã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ãŸã„
- Zipã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„
```

### æœ€çµ‚çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆåŒ–ã—ãŸè¦ä»¶ã‚’ã¾ã¨ã‚ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¡¨ç¾ã¨ãªã‚‹ã€‚

````md: æœ€çµ‚çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
ä»¥ä¸‹ã®æ¡ä»¶ã§Excelãƒ‡ãƒ¼ã‚¿ã‹ã‚‰JSONã«å¤‰æ›ã™ã‚‹HTMLãƒ•ã‚¡ã‚¤ãƒ«ãŒã»ã—ã„ã€‚

Excelãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```
- "å¹´ä»£" ã‚·ãƒ¼ãƒˆ
  - "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå" åˆ—
  - "æ›²å" åˆ—
  - "ãƒªãƒªãƒ¼ã‚¹æ—¥" åˆ—
  - "BPM" åˆ—
```

JSONãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```
{
  "period": "å¹´ä»£",
  "artist": "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå",
  "trackList": [
    { "name": "æ›²å", "date": "ãƒªãƒªãƒ¼ã‚¹æ—¥", "bpm": "BPM" }
  ]
}
```

- HTML/JSã‚’åˆ©ç”¨ã™ã‚‹
- index.htmlå†…ã«å¤‰æ›å‡¦ç†ã‚’æŒã¤
- HTMLå…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ãŒã»ã—ã„
- formã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ãŸã„
- Zipã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã„
- "å¹´ä»£" ã‚·ãƒ¼ãƒˆã¯è¤‡æ•°å­˜åœ¨ã™ã‚‹
- ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ã¯ {å¹´ä»£}/{ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå}.json
- "trackList" ã«ã¯ "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå" ãŒä¸€è‡´ã™ã‚‹æƒ…å ±ã‚’ã¾ã¨ã‚ã‚‹
````

## å®Œæˆ: ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆã‚’å…ƒã«ã—ã¦æ§‹é€ åŒ–ã•ã‚ŒãŸJSONã‚’ç”Ÿæˆã—ãŸã„

ChatGPTã‹ã‚‰ã®è¿”å´ã‚’ä»¥ä¸‹ã«ç™»éŒ²ã—ãŸã€‚

https://jsfiddle.net/Yakinik/w4m9yb6q/

å¤‰æ›ç”¨ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿: [tracks.xlsx](https://www.dropbox.com/s/riv7eg7zssa25gx/tracks.xlsx?dl=0)

ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§å‹•ä½œã‚’ç¢ºèªã—ãŸã¨ã“ã‚ã€æƒ³å®šã—ãŸå‹•ãã«ãªã£ã¦ã„ã‚‹ã€‚

![](https://storage.googleapis.com/zenn-user-upload/689459c34f6d-20230217.png)

### ç´°ã‹ãªè¦‹è½ã¨ã—

![](https://storage.googleapis.com/zenn-user-upload/1d273106f978-20230219.png)

ã‚ˆãè¦‹ã‚‹ã¨ã€ "date", "bpm" ã®å€¤ãŒæš—é»™çš„ã«æ•°å€¤ã«ãªã£ã¦ã„ã‚‹ã€‚
äº‹é …ã§ã®ãƒˆãƒ”ãƒƒã‚¯ã«ã‚‚é–¢ã‚ã‚‹ãŸã‚ã€ã„ã£ãŸã‚“æç¤ºã—ã¦ãŠãã€‚

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä¸€æ‹¬ã§ãƒã‚§ãƒƒã‚¯ã—ãŸã„

### è¦æ±‚

ã–ã£ãã‚Šä»¥ä¸‹ã®ã‚ˆã†ãªäº‹ã‚’æ€ã„ã¤ã„ãŸã‚‚ã®ã¨ã™ã‚‹ã€‚

> ã‚ã€œã€ä¸€æ‹¬ã§å¤‰æ›ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ãŒæ„å›³ã—ãŸã‚‚ã®ã«ãªã£ã¦ã„ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ãŸã„ãªãƒ¼ã€‚

### è¦ä»¶

è¦æ±‚ã‹ã‚‰è¦ä»¶ã«åˆ†è§£ã—ã¦ã„ãã€‚

#### JSONãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

å‰é … [ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆã‚’å…ƒã«ã—ã¦æ§‹é€ åŒ–ã•ã‚ŒãŸJSONã‚’ç”Ÿæˆã—ãŸã„](#ãƒ‡ãƒ¼ã‚¿ã‚·ãƒ¼ãƒˆã‚’å…ƒã«ã—ã¦æ§‹é€ åŒ–ã•ã‚ŒãŸJSONã‚’ç”Ÿæˆã—ãŸã„) ã§åˆ©ç”¨ã—ãŸæ§‹é€ ã‚’å†åˆ©ç”¨ã™ã‚‹ã€‚
ã¾ãŸã€JSONæ§‹é€ ãƒ†ã‚¹ãƒˆã¯ JSON Schema ã‚’åˆ©ç”¨ã—ã¦ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã™ã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚

```json: JSONãƒ‡ãƒ¼ã‚¿æ§‹é€ 
{
  "period": "å¹´ä»£",
  "artist": "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå",
  "trackList": [
    { "name": "æ›²å", "date": "ãƒªãƒªãƒ¼ã‚¹æ—¥", "bpm": "BPM" }
  ]
}
```

#### ç´°ã‹ã„è¦ä»¶

- (ãŸã¾ã«ã¯)
Pythonã§ã‚„ã‚ŠãŸã„
- ç¬¬äºŒå¼•æ•°ã§Zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ãŸã„
- Zipãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã¾ã‚Œã‚‹JSONå…¨ã¦ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã„
- ã‚¨ãƒ©ãƒ¼ãŒã‚ã£ãŸç®‡æ‰€ã¨ã‚¨ãƒ©ãƒ¼ã®åŸå› ã‚’çŸ¥ã‚ŠãŸã„

### è¦ä»¶ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è½ã¨ã—è¾¼ã‚€

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è½ã¨ã—è¾¼ã‚€ã«ã¯ã€è¦ä»¶ã‚’è©³è¨˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

#### JSONãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

JSONãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯å‰å›æŠ½è±¡åŒ–ã—ãŸæ§‹é€ ã¨ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã®æŒ‡å®šã®æ˜ç¤ºã§å¯¾å¿œã§ãã‚‹ã€‚

```md: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- JSONæ§‹é€ ã‚’JSON Schemaã«å¤‰æ›ã—ãŸã„
```

#### ç´°ã‹ã„è¦ä»¶

ãã‚Œãã‚Œãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå‘ã‘ã®æ–‡è¨€ã«ç›´ã™ã€‚
å¼•æ•°ã®æŒ‡å®šæ–¹æ³•ã¯æŒ‡å®šãƒ–ãƒ­ãƒƒã‚¯ã‚’ã¾ã¨ã‚ã‚‹ã¨å–ã‚Šã“ã¼ã—ã‚„ã™ã„ãŸã‚ã€åˆ¥ã®ãƒ–ãƒ­ãƒƒã‚¯ã«åˆ†ã‘ãŸã€‚

```md: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
å‡¦ç†
- Pythonã‚³ãƒ¼ãƒ‰å…¨ä½“ãŒæ¬²ã—ã„
- æŒ‡å®šã—ãŸZipãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã¾ã‚Œã‚‹JSONã‚’å†å¸°çš„ã«æ¢ã—ãŸã„
- è¦‹ã¤ã‹ã£ãŸJSONå…¨ã¦ãŒã‚¹ã‚­ãƒ¼ãƒã«ä¸€è‡´ã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ãŸã„
- ã‚¨ãƒ©ãƒ¼ã‚’ `{ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹} [{(å–å¾—å‡ºæ¥ã‚Œã°)ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å}]: {ã‚¨ãƒ©ãƒ¼æ–‡}` ã®å½¢ã§çŸ¥ã‚ŠãŸã„

å‘¼ã³å‡ºã—æ–¹æ³•
- ã‚³ãƒãƒ³ãƒ‰ã®ç¬¬ä¸€å¼•æ•°ã§Zipãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãŸã„
```

### æœ€çµ‚çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆåŒ–ã—ãŸè¦ä»¶ã‚’ã¾ã¨ã‚ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¡¨ç¾ã¨ãªã‚‹ã€‚

````md: æ•´ãˆãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
æ¬¡ã®æ¡ä»¶ã«å¾“ã£ã¦JSONã®æ§‹é€ ãŒæ­£ã—ã„ã‹ã‚’ç¢ºèªã™ã‚‹Pythonã‚³ãƒ¼ãƒ‰ãŒã»ã—ã„ã€‚

ãƒ†ã‚¹ãƒˆåŸºæº–ã¨ãªã‚‹JSONãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```
{
  "period": "å¹´ä»£",
  "artist": "ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå",
  "trackList": [
    { "name": "æ›²å", "date": "ãƒªãƒªãƒ¼ã‚¹æ—¥", "bpm": "BPM" }
  ]
}
```

å‡¦ç†
- Pythonã‚³ãƒ¼ãƒ‰å…¨ä½“ãŒæ¬²ã—ã„
- JSONæ§‹é€ ã‚’JSON Schemaã«å¤‰æ›ã—ãŸã„
- æŒ‡å®šã—ãŸZipãƒ•ã‚¡ã‚¤ãƒ«ã«å«ã¾ã‚Œã‚‹JSONã‚’å†å¸°çš„ã«æ¢ã—ãŸã„
- è¦‹ã¤ã‹ã£ãŸJSONå…¨ã¦ãŒã‚¹ã‚­ãƒ¼ãƒã«ä¸€è‡´ã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ãŸã„
- ã‚¨ãƒ©ãƒ¼ã‚’ `{ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹} [{(å–å¾—å‡ºæ¥ã‚Œã°)ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å}]: {ã‚¨ãƒ©ãƒ¼æ–‡}` ã®å½¢ã§çŸ¥ã‚ŠãŸã„

å‘¼ã³å‡ºã—æ–¹æ³•
- ã‚³ãƒãƒ³ãƒ‰ã®ç¬¬ä¸€å¼•æ•°ã§Zipãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãŸã„
````

### å‹•ä½œç¢ºèª

ChatGPTã‹ã‚‰è¿”å´ã®ã‚ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚

- ç”Ÿæˆã‚³ãƒ¼ãƒ‰: [json_validator.py](https://github.com/Yakinik/zenn-docs/blob/main/assets/5157b12c763e51/json_validator.py)
- ç¢ºèªç”¨ãƒ‡ãƒ¼ã‚¿: [data.zip](https://github.com/Yakinik/zenn-docs/blob/main/assets/5157b12c763e51/data.zip)

ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã§ã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã€‚

```sh
% pip install zipfile jsonschema
```

```sh
% python json_validator.py data.zip
data.zip/1990/çŠ¬.json [deque(['trackList', 0, 'date'])]: 19940401 is not of type 'string'

Failed validating 'type' in schema['properties']['trackList']['items']['properties']['date']:
    {'type': 'string'}

On instance['trackList'][0]['date']:
    19940401

... ä¸­ç•¥ ...

data.zip/2010/çŒ¿.json [deque(['trackList', 0, 'date'])]: 20190909 is not of type 'string'

Failed validating 'type' in schema['properties']['trackList']['items']['properties']['date']:
    {'type': 'string'}

On instance['trackList'][0]['date']:
    20190909
```

å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã§ **"date" å€¤ãŒæ–‡å­—åˆ—ã§ã¯ãªã„** ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ã€‚
æ¯”è¼ƒã—ã¦ã¿ã‚‹ã¨ã€Pythonã‚³ãƒ¼ãƒ‰ä¸­ã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¯ "date" å€¤ã¨ "bpm" å€¤ã‚’æ–‡å­—åˆ—ã ã¨è§£é‡ˆã—ã¦ã„ã‚‹ã®ã«å¯¾ã—ã€å¤‰æ›ãƒ„ãƒ¼ãƒ«ã§å¤‰æ›ã—ãŸJSONã¯ "date" å€¤ã¨ "bpm" å€¤ã‚’æ•°å€¤ã¨ã—ã¦æ‰±ã£ã¦ã„ã‚‹ã€‚

```python: ã‚¹ã‚­ãƒ¼ãƒå®šç¾©éƒ¨åˆ†
"properties": {
  "name": {"type": "string"},
  "date": {"type": "string"},
  "bpm": {"type": "string"}
},
```

```json: ãƒ„ãƒ¼ãƒ«ã§å¤‰æ›å¾Œã®JSON
{
  "name": "é å ãˆA",
  "date": 19940401,
  "bpm": 80
}
```

### è£œå®Œ

åˆ©ç”¨æƒ³å®šä¸Šã§ã¯ "date" å€¤ã¨ "bpm" å€¤ãŒæ•°å€¤ã®ã¾ã¾ã§ã‚‚å•é¡Œã¯ç„¡ã„ãŸã‚ã€ãƒã‚§ãƒƒã‚«ãƒ¼å´ã®ãƒ«ãƒ¼ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã€‚
å¤‰æ›´ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¿½åŠ ã™ã‚‹ã€‚

```md: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- "ãƒªãƒªãƒ¼ã‚¹æ—¥" ã¨ "BPM" ã¯ integer ã¨ã—ã¦æ‰±ã„ãŸã„
```

## å®Œæˆ: ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’ä¸€æ‹¬ã§ãƒã‚§ãƒƒã‚¯ã—ãŸã„

å†ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«è²¼ä»˜ã™ã‚‹ã€‚

- å†ç”Ÿæˆå¾Œã®ã‚³ãƒ¼ãƒ‰: [json_validator_adjust.py](https://github.com/Yakinik/zenn-docs/blob/main/assets/5157b12c763e51/json_validator_adjust.py)
- ç¢ºèªç”¨ãƒ‡ãƒ¼ã‚¿: [data.zip](https://github.com/Yakinik/zenn-docs/blob/main/assets/5157b12c763e51/data.zip)

å®Ÿè¡Œã—ã¦ã¿ã‚‹ã¨ã€ã‚¨ãƒ©ãƒ¼ãªãå‡¦ç†ãŒå®Œäº†ã—ãŸã€‚
æƒ³å®šé€šã‚Šå‹•ä½œã—ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚

```sh
% python json_validator_adjust.py data.zip
% 
```


- ã‚¨ãƒ©ãƒ¼ç¢ºèªç”¨ãƒ‡ãƒ¼ã‚¿: [data_invalid.zip](https://github.com/Yakinik/zenn-docs/blob/main/assets/5157b12c763e51/data_invalid.zip)

:::details å®Ÿè¡Œçµæœ
```sh
% python json_validator_adjust.py data_invalid.zip
data_invalid.zip/1990/çŠ¬.json [deque([])]: 'period' is a required property

Failed validating 'required' in schema:
    {'$schema': 'http://json-schema.org/schema#',
     'properties': {'artist': {'type': 'string'},
                    'period': {'type': 'string'},
                    'trackList': {'items': {'properties': {'bpm': {'type': 'integer'},
                                                           'date': {'type': 'integer'},
                                                           'name': {'type': 'string'}},
                                            'required': ['name',
                                                         'date',
                                                         'bpm'],
                                            'type': 'object'},
                                  'type': 'array'}},
     'required': ['period', 'artist', 'trackList'],
     'type': 'object'}

On instance:
    {'artist': 'çŠ¬',
     'trackList': [{'bpm': 80, 'date': 19940401, 'name': 'é å ãˆA'},
                   {'bpm': 60, 'date': 19991215, 'name': 'é å ãˆB'}]}
data_invalid.zip/1990/çŒ«.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
data_invalid.zip/2000/é´¨.json [deque([])]: 'artist' is a required property

Failed validating 'required' in schema:
    {'$schema': 'http://json-schema.org/schema#',
     'properties': {'artist': {'type': 'string'},
                    'period': {'type': 'string'},
                    'trackList': {'items': {'properties': {'bpm': {'type': 'integer'},
                                                           'date': {'type': 'integer'},
                                                           'name': {'type': 'string'}},
                                            'required': ['name',
                                                         'date',
                                                         'bpm'],
                                            'type': 'object'},
                                  'type': 'array'}},
     'required': ['period', 'artist', 'trackList'],
     'type': 'object'}

On instance:
    {'period': '2000',
     'trackList': [{'bpm': 145, 'date': 20061112, 'name': 'ãƒ”ãƒ«ãƒ”ãƒ«'}]}
data_invalid.zip/2010/çŒ¿.json [deque(['trackList', 0, 'name'])]: False is not of type 'string'

Failed validating 'type' in schema['properties']['trackList']['items']['properties']['name']:
    {'type': 'string'}

On instance['trackList'][0]['name']:
    False
```

|å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«|ã‚¨ãƒ©ãƒ¼å†…å®¹|
|:--|:--|
|data_invalid.zip/1990/çŠ¬.json|"period" å€¤ãŒå­˜åœ¨ã—ãªã„|
|data_invalid.zip/1990/çŒ«.json|ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä¸è¶³ã«ã‚ˆã‚‹ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ã‚¨ãƒ©ãƒ¼|
|data_invalid.zip/2000/é´¨.json|"artist" å€¤ãŒå­˜åœ¨ã—ãªã„|
|data_invalid.zip/2010/çŒ¿.json|"name" å€¤ãŒæ–‡å­—åˆ—ã§ã¯ãªã„|
:::

ãã‚Œãã‚Œä»•è¾¼ã‚“ã ã¨ãŠã‚Šã®ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€æƒ³å®šã—ãŸå‹•ä½œã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ã ã€‚

## /* TBD */

æ€ã„ã¤ã„ãŸã‚‰æ›¸ã

